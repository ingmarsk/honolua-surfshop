<%=%>
<% if notice %>
<p id="notice"><%= notice %></p>
<% end %>

<div class="btn btn-default" role="button"><%= link_to 'New Product', new_product_path %></div> 

<!-- Call the overall cache entry 'store' -->
<%= cache ['store', Product.latest] do %>
<div class="row">
	<% @products.each do |product| %>
    <!-- Call the individual cache entry as 'entry' -->
    <% cache ['entry', product] do %>
    <div class="col-sm-12 col-md-3">
      <div class="product">
      	<div class="thumbnail">
        	<%= image_tag(product.image_url) %>
      	</div>
        <div class="caption">
          <h4><%= product.title.truncate(50) %></h4>
          <p><%= sanitize(product.description.truncate(90)) %></p>
          <h4><span class="label label-success"><%= number_to_currency(product.price) %></span></h4>

          <div class="btn-group" role="group">
            <button type="button" class="btn btn-default"><%= link_to 'Show', product %></button>
            <button type="button" class="btn btn-default"><%= link_to 'Edit', edit_product_path(product) %></button>
            <button type="button" class="btn btn-default">
              <%= link_to 'Destroy', product, method: :delete, data: { confirm: 'Are you sure?' } %>
            </button>
            <div class="btn btn-default"><%= button_to 'Add Cart', line_items_path(product_id: product), remote: true %></div>  
          </div>

        </div>
      </div>
    </div>
    <% end %>
  <% end %>
</div>
<% end %>